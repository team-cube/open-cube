// this config defines various heightmap brushes

// a brush has two parts: the brushmap and the brushhandle

// the brushmap is a 2D field that defines how the brush affects a heightmap

// the brushhandle is a 2D vertex on the brushmap.
// this handle is a reference point on the brushmap which represents
// where the editing cursor is pointed at.

// clearbrush                   : resets the brushmap
// brushvert <x> <y> <value>    : set a point on the brushmap
// brushx <x>                   : the x coordinate of the brushhandle
// brushy <y>                   : the y coordinate of the brushhandle

brushhandle = [
  brushx $arg1
  brushy $arg2
]

brushindex = -1
brushmax = -1                // make sure to bump this up if you add more brushes

selectbrush = [
  brushindex = ( + $brushindex $arg1 )
  if (< $brushindex 0) [ brushindex = $brushmax ]
  if (> $brushindex $brushmax) [ brushindex = 0 ]
  do [brush_@brushindex]
  echo "heightmap brush set to:" $brushname
]

brushverts = [
  loop y (listlen $arg1) [
    bv = (at $arg1 $y)
    loop x (listlen $bv) [
      brushvert $x $y (at $bv $x)
    ]
  ]
]

newbrush = [
  brushmax = (+ $brushmax 1)
  do [ 
    brush_@brushmax = [
      brushname = [@@@arg1]
      clearbrush
      @@(if (> $numargs 1) [result [brushhandle @arg2 @arg3; brushverts [@@arg4]]])
    ]
  ]
]

newbrush "Circle 1-0" 0 0 [1]
newbrush "Circle 2-1" 2 2 [
    ""
    "0 0 1 "
    "0 1 2 1 "
    "0 0 1 "
]
newbrush "Circle 4-2-1" 2 2 [
  "0 0 1 "
  "0 1 2 1 "
  "1 2 4 2 1 "
  "0 1 2 1 "
  "0 0 1 "
]
newbrush "Square 3x3" 1 1 [
  "1 1 1 "
  "1 1 1 "
  "1 1 1 "
]
newbrush "Square 5x5" 2 2 [
  "1 1 1 1 1 "
  "1 1 1 1 1 "
  "1 1 1 1 1 "
  "1 1 1 1 1 "
  "1 1 1 1 1 "
]
newbrush "Square 7x7" 3 3 [
  "1 1 1 1 1 1 1 "
  "1 1 1 1 1 1 1 "
  "1 1 1 1 1 1 1 "
  "1 1 1 1 1 1 1 "
  "1 1 1 1 1 1 1 "
  "1 1 1 1 1 1 1 "
  "1 1 1 1 1 1 1 "
]

newbrush "Smooth 3x3" 1 1 [
  "0 0 0 "
  "0 "
  "0 "
]
newbrush "Smooth 5x5" 2 2 [
  "0 0 0 0 0 "
  "0 "
  "0 "
  "0 "
  "0 "
]
newbrush "Smooth 7x7" 3 3 [
  "0 0 0 0 0 0 0"
  "0 "
  "0 "
  "0 "
  "0 "
  "0 "
  "0 "
]

newbrush "Noise 25x25" 12 12 [
  "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 "
  ""
  "0 0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 0 0 0 0 1 1 0 1 "
  "0 0 0 0 0 1 0 0 0 1 0 0 0 0 1 0 1 0 0 1 0 0 2 2 "
  "0 0 0 0 1 1 1 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 1 1 "
  "0 0 0 0 0 1 0 0 0 0 0 2 0 0 0 0 1 0 0 0 1 1 0 0 1 "
  "0 0 1 0 0 0 1 0 1 1 0 0 0 0 1 0 0 1 0 0 0 0 2 "
  "0 0 0 1 0 1 1 0 0 0 0 0 0 0 0 0 0 1 1 1 2 "
  "0 0 0 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 1 0 0 1 1 "
  "0 0 0 0 1 1 1 0 0 1 0 0 0 0 0 0 0 0 1 0 0 1 0 1 "
  "0 1 0 2 0 1 1 1 1 0 0 1 0 0 0 0 1 "
  "0 0 0 0 2 0 0 0 0 0 0 0 0 0 0 0 1 1 0 1 1 "
  "1 0 1 0 0 0 0 0 1 0 0 0 1 0 1 "
  "0 0 0 0 0 0 0 1 1 0 1 1 0 0 1 0 0 1 0 0 0 0 1 0 0 1 "
  "0 1 1 1 0 3 0 2 0 0 0 1 1 0 0 0 1 1 "
  "0 0 1 0 0 1 0 0 1 0 1 1 0 1 0 0 0 0 0 1 "
  "0 0 1 1 0 0 0 0 2 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 1 "
  "0 1 1 0 1 0 0 1 0 0 0 0 0 1 0 0 1 1 0 0 0 0 1 "
  "1 0 0 0 0 0 1 0 0 1 0 0 1 0 0 0 0 0 0 0 1 0 0 1 0 1 "
  "0 0 0 1 0 0 1 0 1 1 0 0 0 0 0 0 0 1 "
  "0 0 0 0 0 0 1 1 1 0 1 1 1 0 0 0 0 0 0 0 0 0 0 1 "
  "0 0 0 0 1 0 1 1 0 2 0 0 0 0 0 1 0 0 0 1 0 0 0 0 1 "
  "0 0 0 0 0 0 0 0 0 1 0 1 "
  "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 "
]

do [ brush_2 ] // 421



//////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////
//Texture blending

addblendbrush "Circle 8px Soft"    "media/brush/circle_8_soft.png"
addblendbrush "Circle 8px Hard"    "media/brush/circle_8_hard.png"
addblendbrush "Circle 8px Solid"   "media/brush/circle_8_solid.png"
addblendbrush "Circle 16px Soft"   "media/brush/circle_16_soft.png"
addblendbrush "Circle 16px Hard"   "media/brush/circle_16_hard.png"
addblendbrush "Circle 16px Solid"  "media/brush/circle_16_solid.png"
addblendbrush "Circle 32px Soft"   "media/brush/circle_32_soft.png"
addblendbrush "Circle 32px Hard"   "media/brush/circle_32_hard.png"
addblendbrush "Circle 32px Solid"  "media/brush/circle_32_solid.png"
addblendbrush "Circle 64px Soft"   "media/brush/circle_64_soft.png"
addblendbrush "Circle 64px Hard"   "media/brush/circle_64_hard.png"
addblendbrush "Circle 64px Solid"  "media/brush/circle_64_solid.png"
addblendbrush "Circle 128px Soft"  "media/brush/circle_128_soft.png"
addblendbrush "Circle 128px Hard"  "media/brush/circle_128_hard.png"
addblendbrush "Circle 128px Solid" "media/brush/circle_128_solid.png"
addblendbrush "Circle 256px Soft"  "media/brush/circle_256_soft.png"
addblendbrush "Circle 256px Hard"  "media/brush/circle_256_hard.png"
addblendbrush "Circle 256px Solid" "media/brush/circle_256_solid.png"
addblendbrush "Noise 64px Soft"    "media/brush/noise_64_soft.png"
addblendbrush "Noise 64px Hard"    "media/brush/noise_64_hard.png"
addblendbrush "Noise 128px Soft"   "media/brush/noise_128_soft.png"
addblendbrush "Noise 128px Hard"   "media/brush/noise_128_hard.png"
addblendbrush "Noise 256px Soft"   "media/brush/noise_256_soft.png"
addblendbrush "Noise 256px Hard"   "media/brush/noise_256_hard.png"
addblendbrush "Noise 512px Soft"   "media/brush/noise_512_soft.png"
addblendbrush "Noise 512px Hard"   "media/brush/noise_512_hard.png"
addblendbrush "Noise 1024px Soft"  "media/brush/noise_1024_soft.png"
addblendbrush "Noise 1024px Hard"  "media/brush/noise_1024_hard.png"
addblendbrush "Square 16px Hard"   "media/brush/square_16_hard.png"
addblendbrush "Square 16px Solid"  "media/brush/square_16_solid.png"
addblendbrush "Square 32px Hard"   "media/brush/square_32_hard.png"
addblendbrush "Square 32px Solid"  "media/brush/square_32_solid.png"
addblendbrush "Square 64px Hard"   "media/brush/square_64_hard.png"
addblendbrush "Square 64px Solid"  "media/brush/square_64_solid.png"
addblendbrush "Gradient 16px"      "media/brush/gradient_16.png"
addblendbrush "Gradient 32px"      "media/brush/gradient_32.png"
addblendbrush "Gradient 64px"      "media/brush/gradient_64.png"
addblendbrush "Gradient 128px"     "media/brush/gradient_128.png"
