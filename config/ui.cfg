// standard menu definitions
// don't modify, add personal menus to autoexec.cfg instead

exec "config/ui_edithud.cfg"       // Editmode HUD
exec "config/ui_fkey.cfg"          // F# Key Menus
exec "config/ui_scoreboard.cfg"    // Scoreboard
exec "config/ui_serverbrowser.cfg" // Server Browser

togglemainmenu = [|| (hidetopui) [if (isconnected) [toggleui main_c] [toggleui main]]]

bind ESCAPE [togglemainmenu]

///////////////////////////////////////////////////////////////////////////////
//  Menu - Main                                                              //
///////////////////////////////////////////////////////////////////////////////
UIMenuNoTitle "main" [
   uivlist 0.0075 [
      UIButton "Server Browser" [hideui main; showui servers]
      uispace 0 0.01
      UIButton "Load Map"       [hideui main; showui loadmap]
      uispace 0 0.01
      UIButton "Player Setup"   [hideui main; showui player_setup]
      UIButton "Options"        [hideui main; showui options]
      UIButton "Credits"        [hideui main; showui credits]
      uispace 0 0.01
      UIButton "Quit"           [quit]
      uiclamp* 1 1 0 0
   ]
]

UIMenuNoTitle "main_c" [
   uivlist 0.0075 [
      UIButton "Server Browser" [hideui main; showui servers]
      case $getteam 1 [UIButton "Join Team Rojo" [team rojo; hidetopui]] 2 [UIButton "Join Team Azul" [team azul; hidetopui]] ()
      if (isspectator) [UIButton "Join Players" [spectator 0; hidetopui]] [UIButton "Join Spectators" [spectator 1; hidetopui]]
      uispace 0 0.01
      UIButton "Load Map"       [hideui main; showui loadmap]
      uispace 0 0.01
      UIButton "Player Setup"   [hideui main; showui player_setup]
      UIButton "Options"        [hideui main; showui options]
      uispace 0 0.01
      UIButton "Disconnect"     [disconnect; hidetopui]
      uiclamp* 1 1 0 0
   ]
]

///////////////////////////////////////////////////////////////////////////////
//  Menu - Player Setup                                                      //
///////////////////////////////////////////////////////////////////////////////
ps_model  = 0
ps_color  = $playercolor
ps_team   = 0
ps_weapon = 1
ps_colorbutton = [
   uifill 0.06 0.06 [
      uicolor (getplayercolor $arg2 $arg3)
         uiclamp- 1 1 1 1
      if (= $$arg1 $arg2) [
         uioutline 0xFFFFFF
            uiclamp- 1 1 1 1
      ]
      uirelease [
         $arg1 = $arg2
         ps_team = $arg3
      ]
   ]
]

UIMenu "player_setup" [
   uihlist 0 [
      uivlist 0.01 [ 
         ps_color = (case $ps_team 1 $playercolorazul 2 $playercolorrojo () $playercolor)
         uiplayerpreview $ps_model $ps_color $ps_team $ps_weapon 0.5 0.5
         uihlist 0.01 [
            UIRadio ps_team = 0; uitext "Solo" 0.6
            UIRadio ps_team = 1; uitext "Azul" 0.6
            UIRadio ps_team = 2; uitext "Rojo" 0.6
         ]
         uihlist 0.01 [
            UIRadio ps_weapon = 1; uitext "Pulse Rifle" 0.6
            UIRadio ps_weapon = 0; uitext "Railgun" 0.6
         ]
      ]
      uivlist 0.01 [
         uitext "Name" 0.7
         uifield name 15 [] 1 [uioutline (uifocus? 0xFF0000 0x4f4d4c); uiclamp- 1 1 1 1]
         uitext "Color: Solo" 0.7
         uigrid 4 0.006 0.006 [
            loop i 16 [ps_colorbutton playercolor $i 0]
         ]
         uitext "Color: Azul" 0.7
         uigrid 4 0.006 0.006 [
            loop i 4 [ps_colorbutton playercolorazul $i 1]
         ]
         uitext "Color: Rojo" 0.7
         uigrid 4 0.006 0.006 [
            loop i 4 [ps_colorbutton playercolorrojo $i 2]
         ]
         uialign* -1 -1
      ]
      uialign* -1 -1
   ]
] "Player Setup"

///////////////////////////////////////////////////////////////////////////////
//  Menu - Options                                                           //
///////////////////////////////////////////////////////////////////////////////
UIMenu "options" [
   hidechanges 1
   uifill 0.3 0.3
   uitable 0.01 0.01 [
      uitablerow [
         uifill 0.03 0.03; uitext "water"
         uihlist 0.01 [
            UICheckBox waterreflect; uitext "reflection"
            UICheckBox caustics; uitext "caustics"
            UICheckBox vertwater; uitext "animation"
         ]
         uialign* -1 0
      ]
      uitablerow [uifill 0.03 0.03; uitext "shadows"; UIRadioSlider smfilter = [0 low 1 medium 2 high 3 ultra] 7; uialign* -1 0]
      uitablerow [
         UICheckBox gi; uitext "global illumination"
         if $gi [
            UIRadioSlider rhtaps = [12 low 20 medium 32 high] 7
         ]
         uialign* -1 0
      ]
      uitablerow [
        UICheckBox ao; uitext "SSAO"
        if $ao [
            UIRadioSlider aotaps = [5 low 8 medium 12 high] 7 [
               aobilateral (? (>= $aotaps 8) 4 3)
            ]
        ]
        uialign* -1 0
      ]
      uitablerow [
         uifill 0.03 0.03; uitext "anisotropic filtering"
         UIRadioSlider aniso = [0 off 2 2x 4 4x 8 8x 16 16x] 4
         uialign* -1 0
      ]
      uitablerow [
         uifill 0.03 0.03; uitext "multisample AA"
         UIRadioSlider msaa = [0 off 2 2x 4 4x 8 8x 16 16x] 4
         uialign* -1 0
      ]
      uitablerow [
        UICheckBox tqaa; uitext "temporal AA"
        uialign* -1 0
      ]
      uitablerow [
         UICheckBox smaa; uitext "morphological AA"
         if $smaa [
            UIRadioSlider smaaquality = [0 low 1 medium 2 high 3 ultra] 7 [
               smaacoloredge (>= $smaaquality 3)
            ]
         ]
         uialign* -1 0
      ]
      uitablerow [
         UICheckBox fxaa; uitext "FXAA"
         if $fxaa [
            UIRadioSlider fxaaquality = [0 low 1 medium 2 high 3 ultra] 7
         ]
         uialign* -1 0
      ]
      uitablerow [
         UICheckBox grass; uitext "grass"
         if $grass [
            UIRadioSlider grassdist = [128 "quick fade" 256 "moderate fade" 512 "slow fade"] 13
         ]
         uialign* -1 0
      ]
      uitablerow [UICheckBox softparticles; uitext "soft particles"; uialign* -1 0]
      uitablerow [
         UICheckBox decals; uitext "decals"
         if $decals [
            UIRadioSlider decalfade = [10000 "quick fade" 60000 "slow fade"] 13 [
               maxdecaltris (? (> $decalfade 10000) 4096 1024)
            ]
         ]
         uialign* -1 0
      ]
      uitablerow [
         UICheckBox vsync; uitext "v-sync"
         if $vsync [
            uihlist 0.01 [
               UICheckBox vsynctear; uitext "tear"
            ]
         ]
         uialign* -1 0
      ]
      uitablerow [
         uifill 0.03 0.03; uitext "gamma"
         UIHSlider gamma 30 300 [] 0.5 $uitextscale 1
         uialign* -1 0
      ]
   ] 
] "Options" [] [if (pendingchanges) [showui changes]]

///////////////////////////////////////////////////////////////////////////////
//  Menu - Credits                                                           //
///////////////////////////////////////////////////////////////////////////////
creditlist = [
   uicolortext $arg1 0x808080 0.6 [uialign -1 0]
   uiline 0xFFFFFF; uiclamp- 1 1
   uispace 0.01 0 [
      uialign -1 0
      uivlist 0.001 [
         looplist credit $arg2 [
            uitext (strreplace (strreplace $credit "^"" "^fs^f8^"" "^"^fr") ": " "^f4: ") 0.6
         ]
         uialign* -1 0
      ]
   ]
   uispace 0 0.01
]

UIMenu "credits" [
   UIVScroller 0.8 0.8 0.02 3.0 [
      uivlist 0.001 [
         uialign 0 -1
         creditlist "Project" [
            [Lee "eihrul" Salzman]
            [Shane "Nieb" Nieb]
         ]
         creditlist "Code" [
            [Lee "eihrul" Salzman]
            [Benjamin Segovia]
            [Kevin "Hirato Kirata" Meyer]
         ]
         creditlist "Art 2D/3D" [
            [Shane "Nieb" Nieb : Playermodel, Mapmodels, Textures]
         ]
         creditlist "Sound" [
            [Shane "Nieb" Nieb]
            ["Q009"]
         ]
         creditlist "Cartography" [
            [Shane "Nieb" Nieb : complex]
         ]
         creditlist "Kudos" [
            [Kevin "Hirato Kirata" Meyer : CubeScript Documentation]
            ["RaZgRiZ" : UI Documentation]
            [Daniel "q66" Kolesa : Build-system Improvements]
         ]
         creditlist "Cube Engine 2" [
            [Wouter "Aardappel" van Oortmerssen]
            [Lee "eihrul" Salzman]
            [Mike "Gilt" Dysart]
            [Robert "baby-rabbit" Pointon]
            [Quinton "Quin" Reeves]
            [John "geartrooper" Siar]
            [and others...]
            "http://sauerbraten.org/"
         ]
      ]
   ]
] "Tesseract Contributors"

///////////////////////////////////////////////////////////////////////////////
//  Dialog - Display Changes                                                 //
///////////////////////////////////////////////////////////////////////////////
UIMenuNoTitle "changes" [
   uivlist 0.01 [
      uitext "The follow settings have changed:"
      uispace 0 0.01
      loop i (pendingchanges) [
         uitext (pendingchanges $i)
      ]
      uispace 0 0.01
      uitext "Apply changes now?"
      uihlist 0 [
         UIButton "Yes" [applychanges]
         uispace 0.02 0
         UIButton "No" [hideui changes]
      ]
   ]
]

///////////////////////////////////////////////////////////////////////////////
//  Notepad                                                                  //
///////////////////////////////////////////////////////////////////////////////
notepadfile = "untitled.txt"

UIMenu "notepad" [
   uivlist 0.01 [
      uihlist 0.01 [
         uialign -1 0
         uifield notepadfile -35 [] 1 [uioutline (uifocus? 0xFF0000 0x4f4d4c); uiclamp- 1 1 1 1]
         UIButton "load" [textfocus $notepadfile; textload $notepadfile]
         UIButton "save" [textfocus $notepadfile; textsave $notepadfile]
         UIButton "exec" [textfocus $notepadfile; textexec]
         UIButton "copy" [textfocus $notepadfile; textcopy]
         UIButton "paste" [textfocus $notepadfile; textpaste]
         UIButton "select" [textfocus $notepadfile; textselectall]
         UIButton "clear" [textfocus $notepadfile; textclear]
      ]
      uitexteditor $notepadfile -80 20 1 "" 0 [uioutline (uifocus? 0xFF0000 0x4f4d4c); uiclamp- 1 1 1 1]
      textinit $notepadfile $notepadfile
   ]
] "Notepad"

notepad = [
    if (> $numargs 0) [notepadfile = $arg1]
    showui notepad
]

