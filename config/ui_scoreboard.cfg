///////////////////////////////////////////////////////////////////////////////
//  Scoreboard                                                               //
///////////////////////////////////////////////////////////////////////////////
scoreboardtable = [
   uitable 0.01 0.01 [
      uiclamp 1 1 0 0
      uialign 0 -1
      if (> $arg1 0) [
         uitableheader [] [
            if (= $arg1 1) [uicolor 0x3333C0] [uicolor 0xC03333]
               uiclamp- 1 1 1 1
            uispace 0.01 0 [
               uialign -1 0
               uitext (getteamname $arg1) 0.9
            ]
            uispace 0.01 0 [
               uialign 1 0
               uitext (getteamscore $arg1) 0.9
            ]
         ]
      ]
      uitableheader [
         if (scoreboardshowfrags) [uitext frags 0.75]
         uitext name 0.75
         if (scoreboardmultiplayer) [
            if $showpj [uitext pj 0.75]
            if $showping [uitext ping 0.75]
         ]
         if (scoreboardshowclientnum) [uitext cn 0.75]
         uialign* -1 0
      ] [
         uiline 0xFFFFFF; uiclamp- 1 1; uialign- 0 1
      ]
      loopscoreboard cn $arg1 [
         uitablerow [
            if (scoreboardshowfrags) [uitext (getclientfrags $cn) 0.9]
            uicolortext (getclientcolorname $cn) (scoreboardstatus $cn)
            if (scoreboardmultiplayer) [
               if $showpj [uitext (scoreboardpj $cn) 0.9]
               if $showping [uitext (scoreboardping $cn) 0.9]
            ]
            if (scoreboardshowclientnum) [uitext $cn 0.9] 
            uialign* -1 0
         ] [
            pushif sbhigh (scoreboardhighlight $cn) [
               uicolor $sbhigh; uiclamp- 1 1 1 1
            ]
         ]   
      ]
   ]
]

scoreboardspectators = [
   uifill 0 0.01
   if (scoreboardshowclientnum) [
      uitable 0.01 0.01 [
         uiclamp 1 1 1 1
         uialign 0 -1
         uitableheader [
            uitext spectator 0.75
            uitext cn 0.75
            uialign* -1 0
         ] [
            uiclamp 1 1 1 1
            uiline 0xFFFFFF; uiclamp- 1 1; uialign- 0 1
         ]
         loopscoreboard cn -1 [
            uitablerow [
               uicolortext (getclientcolorname $cn) (scoreboardstatus $cn)
               uitext $cn 0.9
               uialign* -1 0
            ] [
               pushif sbhigh (scoreboardhighlight $cn) [
                  uicolor $sbhigh; uiclamp- 1 1 1 1
               ]
            ]
         ]
      ]
   ] [
      uigroup [
         uiclamp 1 1 1 1
         uitext spectators 0.75
         uiline 0xFFFFFF; uiclamp- 1 1; uialign- 0 1
      ]
      uigrid 3 0.01 0.01 [
         uiclamp 1 1 1 1
         loopscoreboard cn -1 [
            uicolortext (getclientcolorname $cn) (scoreboardstatus $cn) 0.75 [
               pushif sbhigh (scoreboardhighlight $cn) [
                  uicolor $sbhigh; uiclamp- 1 1 1 1
               ]
            ]
         ]
      ]
   ]
]

UIMenuNoTitle scoreboard [uiallowinput 0; if $mainmenu [hideui scoreboard] [
   refreshscoreboard
   uispace 0.01 0.01 [
      uivlist 0.01 [
         pushif sbserv (scoreboardservinfo) [
            uitext $sbserv 0.9
         ]
         uihlist 0.01 [
            uitext (scoreboardmode) 0.9
            uispace 0.01 0 [uiclamp 0 0 1 1; uiline 0xC0C0C0; uiclamp- 0 0 1 1]
            uitext (scoreboardmap) 0.9
            pushif sbtime (scoreboardtime) [
               uispace 0.01 0 [uiclamp 0 0 1 1; uiline 0xC0C0C0; uiclamp- 0 0 1 1]
               uitext $sbtime 0.9
            ]
            if (!= $gamespeed 100) [
               uispace 0.01 0 [uiclamp 0 0 1 1; uiline 0xC0C0C0; uiclamp- 0 0 1 1]
               uitext $prettygamespeed 0.9
            ]
            if $paused [
               uispace 0.01 0 [uiclamp 0 0 1 1; uiline 0xC0C0C0; uiclamp- 0 0 1 1]
               uitext paused 0.9
            ]
         ]
         if (m_teammode (getmode)) [
            uihlist 0.02 [
               uiclamp 1 1 1 1
               scoreboardtable 1
               scoreboardtable 2
            ]
         ] [
            scoreboardtable 0
         ]
         if (numscoreboard -1) [
            scoreboardspectators
         ]
      ]
   ]
]] [] [] [] [] 0xBB080808
